<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini DuckDuckGo Browser</title>

  <!-- PWA / iOS -->
  <link rel="manifest" href="manifest.json" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="DuckMini" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />

  <style>
    :root {
      --bg: #f7f7f8;
      --accent: #1a73e8;
    }
    html,
    body {
      height: 100%;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--bg);
    }
    header {
      display: flex;
      align-items: center;
      padding: 8px;
      background: var(--bg);
      box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06);
      gap: 8px;
    }
    input[type="search"] {
      flex: 1;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 16px;
      outline-offset: 2px;
    }
    button {
      border: 0;
      background: var(--accent);
      color: white;
      padding: 8px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      user-select: none;
      transition: background-color 0.2s;
    }
    button:hover {
      background: #155ab6;
    }
    #frameWrap {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      top: 56px; /* H√∂he vom header */
      background: white;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: 0;
      background: white;
    }
  </style>
</head>
<body>
  <header>
    <input
      id="q"
      type="search"
      placeholder="DuckDuckGo durchsuchen‚Ä¶"
      autocomplete="off"
      autocapitalize="off"
      autocorrect="off"
      aria-label="Suchfeld"
    />
    <button id="searchBtn" title="Suchen">üîç Suchen</button>
  </header>

  <div id="frameWrap">
    <iframe
      id="pane"
      srcdoc="<p style='font-family: system-ui; padding: 20px;'>Starte eine Suche oben‚Ä¶</p>"
      sandbox="allow-scripts allow-same-origin allow-forms allow-popups"
    ></iframe>
  </div>

  <script>
    const q = document.getElementById("q");
    const searchBtn = document.getElementById("searchBtn");
    const pane = document.getElementById("pane");

    // DuckDuckGo Such-URL mit Parametern
    function ddgUrl(query) {
      const qenc = encodeURIComponent(query || "");
      // kp=-2 = kein Autovervollst√§ndigen & reduziertes UI (Suchleiste bleibt)
      return `https://duckduckgo.com/?q=${qenc}&kp=-2&ia=web`;
    }

    // Lade DuckDuckGo-Ergebnisse im iframe
    function doSearch(query) {
      if (!query) return;
      const url = ddgUrl(query);
      pane.src = url;
    }

    searchBtn.addEventListener("click", () => {
      doSearch(q.value.trim());
    });

    q.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        doSearch(q.value.trim());
      }
    });
  </script>
</body>
</html>
